"use strict";angular.module("ShiftOnTapApp").config(["$stateProvider","$urlRouterProvider",function(a){a.state("invite",{url:"/invite/{invite_email}/code/{invite_code}",templateUrl:"views/invite/invite.html",controller:"InviteCtrl"})}]).controller("InviteCtrl",["$scope","$stateParams","userService","authService","$state","$uibModal",function(a,b,c,d,e,f){"ngInject";var g=b.invite_email,h=b.invite_code;a.email=g,a.invite_code=h,a.inviteValid=!0;var i=function(){c.verify_invitee(g,h)};i(),a.loginModal={instance:null},a.openLogin=function(){a.loginModal.instance=f.open({animation:!0,template:'<auth-modal modal="loginModal" email="email" action="\'login\'" title="\'Login\'"></auth-modal>',scope:a})},a.signupModal={instance:null},a.openSignup=function(){a.signupModal.instance=f.open({animation:!0,template:'<auth-modal modal="signupModal" action="\'login\'" title="\'Sign Up\'"></auth-modal>',scope:a})},a.$on("INVITE_EVENT",function(b,f){var g=f.error;if(g){if(a.inviteValid=!1,1004!=g.code)if(d.isAuthenticated()){var h=c.getLocalUser();h.email==a.email?e.go("persona"):d.logout()}else d.logout()}else if(d.isAuthenticated()){a.inviteValid=!0;var h=c.getLocalUser(),i=f.data.user;i==h.id?e.go("persona"):d.logout()}else d.logout()})}]);