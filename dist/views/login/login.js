"use strict";angular.module("myApp.login",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("login",{url:"/login",templateUrl:"views/login/login.html",controller:"LoginCtrl"})}]).controller("LoginCtrl",["$scope","$state","authService","userService","shiftService",function(a,b,c,d,e){a.credentials={email:"",password:""},a.showpassword=!1,a.login=function(){if(a.loginForm.$valid){var f=c.login(a.credentials).then(function(b){c.setToken(b.data.access_token),d.getUserByEmail(a.credentials.email).then(function(a){d.setActiveUser(a.data),e.getShifts().then(function(a){return console.log("Success:"+JSON.stringify(a)),e.storeLocalShifts(a.data),!0},function(a){return console.log("Failure to Get Shifts:"+JSON.stringify(a)),!1})},function(a){return!1})},function(a){return!1});f?b.go("persona"):alert("Something went wrong during the signup process.  Please try again.  If the problem persists, please check back later.")}else alert("Please double check your signup form entry and try again.")}}]);