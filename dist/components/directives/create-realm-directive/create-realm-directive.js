angular.module("ShiftOnTapApp").directive("createRealmDirective",["realmService","userService","commonService","personaService","authService",function(a,b,c,d,e){return{scope:{realmInfo:"=createRealmModel"},templateUrl:"components/directives/create-realm-directive/create-realm.html",link:function(c,f,g,h){c.isActiveRealm=a.isActiveRealm(),c.radioModel="employee",c.createRealm=function(){var f=(b.getLocalUser().id,{name:c.newRealmFormModel.name,address:c.address});a.createRealm(f).then(function(c){c.data.access_token&&e.setToken(c.data.access_token),c.data.token_expiration_time&&e.setTokenExpirationTime(c.data.token_expiration_time);var g=c.data.realm;f.id=g.id,a.setLocalRealm(g,!0),d.setLocalPersona(c.data.persona,!1),b.setLocalUser(g.users[0],!0),a.getRealmsByUser().then(function(b){a.setLocalRealms(b.data)},function(a){})},function(a){})},c.newRealmFormModel={name:"",address:"",manager:""},c.address={}}}}]);