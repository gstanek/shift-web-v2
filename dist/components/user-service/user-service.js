angular.module("myApp.userService",["LocalStorageModule"]).service("userService",["$rootScope","localStorageService",function(a,b){var c={userID:"123456",firstName:"",lastName:"",preferredName:"",email:"",persona:{personaID:"56789",roles:["user","admin"],realm:{realmID:"8900",realmName:""}}};this.updateUser=function(a){this.setActiveUser(a)},this.getBestDisplayName=function(){return c=this.getActiveUser(),c?c.preferredName?c.preferredName:c.firstName?c.firstName:c.email?c.email:"Guest":""},this.getAvailableShifts=function(){var a=[];if(null!=c.persona)for(var b=c.persona.shifts,d=0;d<b.length;d++)1==b[d].available&&a.push(b[d]);return a},this.getShifts=function(){var a=[];return null!=c.persona&&(a=c.persona.shifts),a},this.setActiveUser=function(c){console.log("set active user ="+JSON.stringify(c)),b.set("user",c),a.$broadcast("USER_CHANGE_EVENT",c)},this.getActiveUser=function(){return b.get("user")},this.removeActiveUser=function(){b.remove("user"),a.$broadcast("USER_CHANGE_EVENT",c)}}]);