angular.module("ShiftOnTapApp").service("commonService",["localStorageService","$rootScope",function(a,b){this.setPersonaDisplayState=function(){var a=this.getLocalRealm();if(a){var b=this.getLocalUser();if(b){var c=this.getLocalShifts();if(c){var d=this.getLocalCoworkers();d&&d.length>0?this.setLocalPersonaDisplayState("REALM_USER_SHIFTS_COWORKERS"):this.setLocalPersonaDisplayState("REALM_USER_SHIFTS_NO_COWORKERS")}else this.setLocalPersonaDisplayState("REALM_USER_NO_SHIFTS")}else this.setLocalPersonaDisplayState("REALM_NO_USER")}else this.setLocalPersonaDisplayState("NO_REALM")},this.getLocalPersonaDisplayState=function(){return a.get("persona_display_state")},this.setLocalPersonaDisplayState=function(c){a.set("persona_display_state",c),b.$broadcast("PERSONA_DISPLAY_STATE_CHANGE_EVENT",c)},this.removeLocalPersonaDisplayState=function(c){a.remove("persona_display_state"),c&&b.$broadcast("PERSONA_DISPLAY_STATE_CHANGE_EVENT",null)},this.generateErrorResponseObject=function(a){if(console.log("response="+JSON.stringify(a)),-1==a.status)return{httpStatusCode:503,error:{code:5030,message:"Oh no! Something went wrong, please try again"}};var b={httpStatusCode:a.status,error:{code:a.code,message:a.detail}};return console.log("errorResponseObject="+JSON.stringify(b)),b},this.generateResponseObject=function(a){var b={httpStatusCode:a.status,data:a.data};return b},this.getLocalRealm=function(){return a.get("realm")},this.getLocalShifts=function(){var b=a.get("shifts");return b&&0==b.length?null:b},this.getLocalCoworkers=function(){return a.get("coworkers")},this.getLocalUser=function(){return a.get("user")},this.roundMinutes=function(a){return a.setHours(a.getHours()+Math.round(a.getMinutes()/60)),a.setMinutes(0),a}}]);