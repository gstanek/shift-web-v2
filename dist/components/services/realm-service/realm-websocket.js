angular.module("ShiftOnTapApp").service("RealmWebSocket",["$websocket","realmService","shiftService","userService",function(a,b,c,d){var e,f=b.getLocalRealm();f&&(e=a("ws://localhost:8000/realm/"+f.id),e.onMessage(function(a){var b=JSON.parse(a.data);console.log("Received webhook. messageData="+JSON.stringify(b)),0=="shift".localeCompare(b.type)?(console.log("In on message w/ shift option. payload="+JSON.stringify(b)),c.setLocalShift(b.type_object,!0)):0=="user".localeCompare(b.type)?(console.log("In on message w/ user option. payload="+JSON.stringify(b)),d.addLocalCoworkers(new Array(b.type_object),!0)):console.log("message.type not recognized")})),this.connect=function(){f=b.getLocalRealm(),e=a("ws://localhost:8000/realm/"+f.id),e.onMessage(function(a){var b=JSON.parse(a.data);console.log("Received webhook in connect. messageData="+JSON.stringify(b)),0=="shift".localeCompare(b.type)?c.setLocalShift(b.type_object,!0):0=="user".localeCompare(b.type)?(console.log("In connect. user payload="+JSON.stringify(b.type_object)),d.addLocalCoworkers(new Array(b.type_object),!0)):console.log("message.type not recognized")})},this.disconnect=function(){e.close()}}]);