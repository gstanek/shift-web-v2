angular.module("myApp.realmAvailableShiftListDirective",[]).directive("realmAvailableShiftListDirective",["realmService","userService","shiftService",function(a,b,c){return{scope:{realmAvailableShiftListInfo:"=realmAvailableShiftListModel"},templateUrl:"components/realm-available-shift-list-directive/realm-available-shift-list.html",link:function(a){var d=function(){var a=b.getLocalUser();if(a){var d=c.getLocalShifts();return d?!0:!1}return!1};a.isShiftPresent=function(){return d()},a.$on("SHIFT_CHANGE_EVENT",function(){a.availableShifts=c.getLocalShifts()}),a.reclaim=function(a){e(a,!1)},a.markAvailable=function(a){console.log("ShiftID: "+JSON.stringify(a)),e(a,!0)};var e=function(a,b){var d={available:b};c.updateShift(a,d).then(function(a){console.log("Success:"+JSON.stringify(a)),c.setLocalShift(a.data,!0)},function(a){console.log("Failure:"+JSON.stringify(a))})},f=function(){a.isShiftPresent=function(){return d()},a.availableShifts=c.getLocalShifts()};f()}}}]);