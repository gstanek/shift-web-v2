angular.module("myApp.addUsersDirective",[]).directive("addUsersDirective",["userService","realmService","shiftService","commonService",function(a,b,c,d){return{restrict:"E",scope:{modal:"=",save:"&onSave",cancel:"&onCancel"},templateUrl:"components/add-users/add-users.html",link:function(d,e,f,g){d.isActiveRealm=b.isActiveRealm();var h=function(){var b=a.getLocalUser();if(b){var d=c.getLocalShifts();return d?!0:!1}return!1};d.isShiftPresent=function(){return h()},d.companyName=b.getRealmName(),d.formData={users:[{},{},{}]},d.addUsers=function(){for(var c=b.getLocalRealm(),e=c.id,f=[],g=0;g<d.formData.users.length;g++)console.log("formUser:"+JSON.stringify(d.formData.users[g])),d.formData.users[g].email&&d.formData.users[g].first_name&&f.push(d.formData.users[g]);var h={realm_id:e,users:f};a.createUsers(h).then(function(b){console.log("Add Users Success:"+JSON.stringify(b)),a.setLocalCoworkers(h.users,!0),d.save()},function(a){console.log("Add Users Failure:"+JSON.stringify(a))})}}}}]);