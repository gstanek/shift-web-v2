angular.module("myApp.authService",["LocalStorageModule","myApp.userService"]).service("authService",["$rootScope","localStorageService","userService",function(a,b,c){var d={id:"",firstName:"",lastName:"",preferredName:"",email:""};this.isAuthenticated=function(){var a=c.getActiveUser();return null==a?!1:!0},this.isAuthorized=function(a){var b=c.getActiveUser(),d=null;return null!=b&&null!=b.persona&&(d=b.persona.roles),null!=d&&d.indexOf(a)>-1?!0:!1},this.signup=function(a){return console.log("signup service credentials="+JSON.stringify(a)),d={},d.id="23134543",d.email=a.email,c.setActiveUser(d),d},this.login=function(a){return d.email=a.email,c.setActiveUser(d),!0},this.logout=function(){c.removeActiveUser()},this.getBestDisplayName=function(){return null!=d.preferredName?d.preferredName:null!=d.firstName?d.firstName:null!=d.email?d.email:"Guest"},this.getCompanyName=function(){return null!=d.persona&&null!=d.persona.realm&&d.persona.realm.realmName?d.persona.realm.realmName:"Company"},this.getAvailableShifts=function(){var a=[];if(null!=d.persona)for(var b=d.persona.shifts,c=0;c<b.length;c++)1==b[c].available&&a.push(b[c]);return a},this.getShifts=function(){var a=[];return null!=d.persona&&(a=d.persona.shifts),a},this.setIdentityMap=function(c){b.set("user",c),a.$broadcast("USER_CHANGE_EVENT",c)},this.getIdentityMap=function(){return b.get("user")},this.removeActiveUser=function(){b.remove("user"),a.$broadcast("USER_CHANGE_EVENT",d)}}]);