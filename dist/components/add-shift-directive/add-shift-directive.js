angular.module("myApp.addShiftDirective",[]).directive("addShiftDirective",["realmService","userService","shiftService",function(a,b,c){return{scope:{shiftInfo:"=addShiftModel"},templateUrl:"components/add-shift-directive/add-shift.html",link:function(d){function e(a){var b=a.date,c=a.mode;if("day"===c)for(var e=new Date(b).setHours(0,0,0,0),f=0;f<d.events.length;f++){var g=new Date(d.events[f].date).setHours(0,0,0,0);if(e===g)return d.events[f].status}return""}d.isActiveRealm=a.isActiveRealm();var f=function(){var a=b.getActiveUser();if(a){var d=c.getLocalShifts();return d?!0:!1}return!1};d.isShiftPresent=function(){return f()},d.companyName=a.getRealmName(),d.newShiftModel={id:"",dateRangeStart:"",dateRangeEnd:"",comment:""},d.createShift=function(){var b=a.getLocalRealm(),e={start_datetime:d.newShiftModel.dateRangeStart,end_datetime:d.newShiftModel.dateRangeEnd,available:!1,realm:b.id,comment:d.newShiftModel.comment};c.storeShift(e).then(function(a){console.log("Success:"+JSON.stringify(a)),c.storeLocalShift(a.data)},function(a){console.log("Failure:"+JSON.stringify(a))})},d.today=function(){d.dt=new Date},d.today(),d.clear=function(){d.dt=null},d.inlineOptions={customClass:e,minDate:new Date,showWeeks:!0},d.dateOptions={dateDisabled:!1,formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:0,allowInvalid:!1},d.toggleMin=function(){d.inlineOptions.minDate=d.inlineOptions.minDate?null:new Date,d.dateOptions.minDate=d.inlineOptions.minDate},d.toggleMin(),d.open1=function(){d.popup1.opened=!0},d.open2=function(){d.popup2.opened=!0},d.setDate=function(a,b,c){d.dt=new Date(a,b,c)},d.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],d.format=d.formats[0],d.altInputFormats=["M!/d!/yyyy"],d.popup1={opened:!1},d.popup2={opened:!1};var g=new Date;g.setDate(g.getDate()+1);var h=new Date(g);h.setDate(g.getDate()+1),d.events=[{date:g,status:"full"},{date:h,status:"partially"}]}}}]);